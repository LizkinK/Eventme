<!DOCTYPE html>
<html>
<head><title>WebRTC - первое знакомство</title>
  <style>
    video { height: 240px; width: 320px; border: 1px solid grey; }
  </style>
</head>
<body>
  <button id="btn_getUserMedia" onclick="getUserMedia_click()">getUserMedia</button>
  <br>
  <video id="localVideo1" autoplay="true"></video>
  <script src="http://localhost:8080/socket.io/socket.io.js"></script>
  <script>
  	const host = window.location.hostname;
	const url = `ws://${host}:8080`;
	var socket = io.connect(url);

    socket.emit('my other event', 'привет, все получилось');

  	var localStream = null;
  	var streamConstraints = { "audio": true, "video": true };
  	function getUserMedia_success(stream) {
  		  var t = document.getElementById("localVideo1");
  		  console.log(t);
		  console.log("getUserMedia_success():", stream);
		  t.srcObject = stream; 
		  localStream = stream;
		  } 
    function getUserMedia_error(error) {
		  console.log("getUserMedia_error():", error);
		}
	function getUserMedia_click() {
		  console.log("getUserMedia_click()");
		  navigator.webkitGetUserMedia(
		    streamConstraints,
		    getUserMedia_success,
		    getUserMedia_error
		  );
		}

  </script>
</body>
</html>